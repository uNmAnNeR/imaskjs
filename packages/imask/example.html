<html>
<head></head>

<body>
  <h1>IMask Core Demo</h1>
  <input type="text" id="input">
  <div>value: <span id="value"></span></div>
  <div>unmasked: <span id="unmasked"></span></div>
  <div contenteditable="true" id="ce"></div>

  <script src="dist/imask.js"></script>
  <!-- <script src="https://unpkg.com/imask"></script> -->
  <script type="text/javascript">
    const opts = {
      mask: [
        {
          mask: "HH:`mm",
          lazy: false,
          blocks: {
            HH: {
              mask: IMask.MaskedRange,
              from: 0,
              to: 23,
              placeholderChar: "H",
            },
            mm: {
              mask: IMask.MaskedRange,
              from: 0,
              to: 59,
              placeholderChar: "m",
            },
          }
        },
        {
          mask: "HH:`mm:`ss",
          lazy: false,
          blocks: {
            HH: {
              mask: IMask.MaskedRange,
              from: 0,
              to: 23,
              placeholderChar: "H",
            },
            mm: {
              mask: IMask.MaskedRange,
              from: 0,
              to: 59,
              placeholderChar: "m",
            },
            ss: {
              mask: IMask.MaskedRange,
              from: 0,
              to: 59,
              placeholderChar: "s",
            },
          }
        }
      ]
    };

    var result = document.getElementById('value');
    var unmasked = document.getElementById('unmasked');
    var imask = IMask(document.getElementById('input'), opts).on('accept', () => {
      console.log(imask.value, imask.unmaskedValue, imask.typedValue);
      result.innerHTML = imask.value;
      unmasked.innerHTML = imask.unmaskedValue;
    });


    // document.getElementById('input').addEventListener('focus', () => {
    //   imask.updateOptions({
    //     mask: mask.map((m) => ({
    //       ...m,
    //       lazy: false,
    //     })),
    //   });
    // });

    // document.getElementById('input').addEventListener('blur', () => {
    //   imask.updateOptions({
    //     mask: mask.map((m) => ({
    //       ...m,
    //       lazy: true,
    //     })),
    //   });
    // });

    // document.getElementById('input').addEventListener('blur', () => imask.updateOptions({lazy: true}));
    // document.getElementById('input').addEventListener('focus', () => imask.updateOptions({lazy: false}));
  </script>
</body>
</html>
